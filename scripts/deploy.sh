#!/bin/bash

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç –¥–µ–ø–ª–æ—è –¥–ª—è GitHub Pages
# –°–ª–µ–¥—É–µ—Ç –ø–æ–¥—Ö–æ–¥—É –∏–∑ –≤–∏–¥–µ–æ: https://www.youtube.com/watch?v=Hbixs7ACvvw

echo "üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π SNK —Å–∞–π—Ç–∞"
echo "=================================="

# 1. –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç –∏–∑ –ø–∞–ø–∫–∏ source
echo "üì¶ –°–æ–±–∏—Ä–∞–µ–º –ø—Ä–æ–µ–∫—Ç..."
cd source
quarto render --to html
cd ..

# 2. –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ source/_book –≤ docs
echo "üìã –ö–æ–ø–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –≤ docs..."
cp -r source/_book/* docs/
cp source/_book/.nojekyll docs/

# 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ index.html —Å–æ–∑–¥–∞–ª—Å—è
if [ -f "docs/index.html" ]; then
    echo "‚úÖ index.html —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ"
else
    echo "‚ùå –û—à–∏–±–∫–∞: index.html –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

# 4. –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git
echo "üìù –î–æ–±–∞–≤–ª—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ git..."
git add .

# 5. –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç
echo "üíæ –°–æ–∑–¥–∞–µ–º –∫–æ–º–º–∏—Ç..."
git commit -m "–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π: $(date '+%Y-%m-%d %H:%M')"

# 6. –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ GitHub
echo "üì§ –ó–∞–≥—Ä—É–∂–∞–µ–º –≤ GitHub..."
git push origin main

echo ""
echo "‚úÖ –î–µ–ø–ª–æ–π –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo "üåê –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ 2-5 –º–∏–Ω—É—Ç:"
echo "   https://svtsar.github.io/SNK/"
echo ""
echo "üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:"
echo "   https://github.com/svtsar/SNK/actions" 